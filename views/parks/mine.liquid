{% layout 'layout.liquid'%}
{% block content %}
<h2 class="display-6" id="my-parks-head">My Parks</h2>
{% for park in parks %}
<div class="card">
    <h5 class="card-header">{{ park.fullName }}</h5>
    <div class="card-body">
      <h5 class="card-title">Description:</h5>
      <p class="card-text">{{ park.description }}</p>
      <div class="col-md-6 justify-content-center">
         {% assign visit = 0 %}
         {% for visit in visits %}
            {% assign visit = visit | plus: 1 %}
           {% endfor %} 
           Visits: {{ visit }}
        <form action="/comments/{{ park.id }}" method="POST">
            <fieldset class="form-label">
                <legend>ADD COMMENT</legend>
                <label class="form-label">Comment: </label>
                <input type="text" class="form-control" name="note" placeholder="enter comment here...">
            </fieldset>
            <input type="submit" class="btn btn-success" value="ADD COMMENT">
        </form>
    </div>
    {% if park.comments.length > 0 %}
    <div class="container-sm justify-content-center">
        <div class="col-md-8 col-lg-6">
            <!-- here we need to loop over the comments -->
            <!-- for every comment render a comment.liquid block -->
            {% for comment in parkId.comments %}
            <h1>{{ comment }}</h1>
                {% render '../comment.liquid', comment: comment, userId: userId, park: park %}
            {% endfor %}
        </div>
    </div>
{% endif %}
        <br><form action="/parks/{{ park._id }}/visit?_method=PUT" method="POST">
            <input type="submit" value="ADD VISIT" class="btn btn-primary">
        </form>
        <br><form action="/parks/delete/?_method=DELETE" method="POST">
            <input type="submit" value="DELETE" class="btn btn-danger">
        </form> 
    </div>
    {% endfor %} 
  </div>
  
{% endblock %}
